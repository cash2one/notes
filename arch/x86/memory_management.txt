------------------------------------------------------------------------------------- |
段(Segment)寻址技术                                                                   |
80X86使用了一种称为段得寻址技术。这个寻址技术把内存空间分成一个或多个段的线性区域，一 |
个地址就有两部分:段的起始地址(段地址)和一个段内偏移。段地址部分使用16位的段选择符指定 |
，其中14位可以选择某个段，所以最多可有2^14即16384个段。段内偏移用32位的值来指定，即一 |
个段最大长度可达4G。                                                                  |
                                                                                      |
逻辑地址(虚拟地址)                                                                    |
程序中由16位的段和32位的偏移构成的48位地址或长指针称为一个逻辑地址。                  |
                                                                                      |
物理地址                                                                              |
计算机的物理内存是字节的线性数组，每个字节具有一个唯一的物理地址。物理地址空间定义为处|
理器在其地址总线上能够产生的地址范围。                                                |
                                                                                      |
段寄存器                                                                              |
80X86为段部分提供了6个存放段选择符的段寄存器:CS、DS、ES、SS、FS和GS。                 |
CS: 代码段寄存器，由CS寻址的段称为当前代码段。EIP寄存器中包含了当前代码段内下一条要执 |
    行指令的段内偏移地址。因此要执行指令的地址可以表示成CS:[EIP]。                    |
SS；堆栈段寄存器。                                                                    |
DS: 数据段寄存器。                                                                    |
                                                                                      |
分段与分页                                                                            |
逻辑地址不能直接用于访问物理内存，而需要使用地址变换机制将它变换或映射到物理内存上。内|
存管理机制即用于将这种逻辑地址转换成物理内存地址。变换通常以内存块作为操作单位，分段机|
制和分页机制是两种广泛使用的地址变换技术。                                            |
                                                                                      |
地址变换过程                                                                          |
80X86在从逻辑地址到物理地址变换过程中使用了分段和分页两种机制。第一阶段使用分段机制把 |
程序的逻辑地址变换成处理器可以寻址内存空间(称为线性地址空间)中的地址。第二阶段使用分页|
机制把线性地址转换为物理地址。阶段一总是使用，阶段二可选。如果关闭分页，那么线性地址就|
直接映射为物理地址，即二者相同。                                                      |
                                                                                      |
分段机制                                                                              |
逻辑地址包括一个段选择符和一个偏移量。段选择符是一个段得唯一标示，每个段都有一个段描述|
符。段描述符指明段的大小、访问权限、段得特权级、段类型、段的基地址等。逻辑地址的偏移量|
部分加到段得基地址上就可以定位段中某个字节的位置。因此基地址加上偏移量就形成了处理器线|
性地址空间中的地址。如果处理器中有多个任务在运行，每个任务可分配各自的一套段。        |
                                                                                      |
分页机制                                                                              |
多任务系统通常定义的线性地址空间都要比其含有的物理内存容量大得多，所以需要使用某种"虚 |
拟化"线性地址空间的方法，即使用虚拟存储技术。分页机制支持虚拟存储技术。在使用虚拟存储 |
的环境中，大容量的线性地址空间需要使用小块的物理内存(RAM或ROM)以及某些外部存储空间(如 |
硬盘)来模拟。当使用分页是，每个段被划分成页面(通常每页为4KB大小)，页面会被存储于物理内|
存中或硬盘上。操作系统通过维护一个页目录和一些页表来留意这些页面。当程序(或任务)试图访|
问线性地址空间中的一个地址位置时，处理器就会使用页目录和页表把线性地址转换成一个物理地|
址，然后再内存位置上执行所要求的操作(读或写)。如果当前访问的页面不在物理内存中，处理器|
就会中断程序的执行(通常产生一个也错误异常)。然后操作系统就可以从硬盘上把该页面读入物理|
内存中，并继续执行刚才被中断的程序(就好像没有发生缺页)。










